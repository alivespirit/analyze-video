:root{
  --bg:#0f1115; --card:#161922; --text:#e6e6e6; --muted:#a8adc0;
  --info:#3b82f6; --warn:#f59e0b; --error:#ef4444; --crit:#dc2626; --ok:#22c55e;
}
*{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;background:var(--bg);color:var(--text)}
html{scroll-behavior:smooth}
header{padding:16px 20px;border-bottom:1px solid #222;position:sticky;top:0;z-index:1000;background:var(--bg)}
/* Center header content to match main width */
header .inner{max-width:1200px;margin:0 auto;display:flex;gap:12px;align-items:center;justify-content:space-between}
/* Ensure header title aligns vertically with nav buttons */
header .inner h1{margin:0;line-height:1}
header .header-left{display:flex;flex-direction:column}
header .header-left .muted{margin:4px 0 0}
h1{margin:0 0 8px 0;font-size:22px}
main{max-width:1200px;margin:0 auto;padding:20px}
.card{background:var(--card);padding:16px;border-radius:10px;margin-bottom:16px}
.card h2{margin:0 0 8px 0;line-height:1.25}
/* Subheader inside cards (e.g., Gate Crossings) */
.card h3.subheading{margin:8px 0 8px 0;line-height:1.2;font-size:16px;font-weight:600;color:var(--muted)}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;margin-bottom:16px}
/* Avoid double spacing: remove card margins inside the grid */
.grid > .card{margin-bottom:0}
/* Split card: left/right columns inside a single card */
.split-card{display:flex;gap:16px;align-items:flex-start;justify-content:space-between;position:relative}
/* Desktop divider between split-card halves: dashed line matching status separators */
.split-card::after{content:"";position:absolute;left:50%;top:0;bottom:0;width:0;border-left:1px dashed #2a2f40}
.split-card .left{flex:1}
.split-card .right{flex:1;text-align:left}
/* Times table: compact first column */
.times-table th:first-child,.times-table td:first-child{width:64px;white-space:nowrap}
.times-table th,.times-table td{vertical-align:middle}
/* Make times table column titles match section headers on desktop */
.times-table th .column-title{display:block;font-size:20px;font-weight:700;line-height:1.25;color:var(--text);margin:0}
.times-table th,.times-table td{vertical-align:middle}
/* Make times table column titles match section headers on desktop */
.times-table th .column-title{display:block;font-size:24px;font-weight:700;line-height:1.25;color:var(--text);margin:0;white-space:normal}
/* Responsive labels: desktop vs mobile */
.label-mobile{display:none !important}
.label-desktop{display:inline}
.days{list-style:none;padding:0;margin:0;display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:8px}
.days li a{display:block;padding:10px 12px;border-radius:8px;background:#1c2130;color:var(--text);text-decoration:none}
.controls{margin-bottom:12px}
.filters{display:flex;gap:12px;align-items:baseline}
.filters .muted{margin:0;line-height:1}
.filters select,.filters button{padding:8px 10px;border-radius:8px;border:1px solid #333;background:#1c2130;color:var(--text)}
.stats{list-style:none;padding:0;margin:0}
.stats li{display:flex;gap:8px;align-items:center;padding:6px 0;border-bottom:1px dashed #2a2f40}
/* Away list: chips inline with wrapping, no borders */
.away-list .stats{display:flex;flex-wrap:wrap;gap:8px;margin:0;padding:0}
.away-list .stats{display:block;gap:8px;margin:0;padding:0}
.away-list .stats li{display:block;align-items:center;border-bottom:none;padding:4px 0}
.away-list .away-chip{white-space:nowrap}
.muted{color:var(--muted);margin:0 0 8px}
.tag{display:inline-block;padding:2px 8px;border-radius:999px;background:#2a2f40;font-size:12px;color:var(--muted)}
.chip-row{display:inline}

.table{width:100%;border-collapse:collapse}
.table{table-layout:fixed}
.table th,.table td{padding:8px;border-bottom:1px solid #222;text-align:left;word-break:break-word;overflow-wrap:anywhere}
.table th.start-col, .table td.start-col {width:80px;max-width:90px;white-space:nowrap;}
.table th.time-events-col, .table td.time-events-col {width:100px;max-width:120px}
.table th.status-col, .table td.status-col {width:28%}
.table td.time-events-col {white-space:nowrap}
.times-table td .sec{font-style:italic}
.table.times-table th,.table.times-table td{border-bottom:1px dashed #2a2f40}
.times-table thead th + th,.times-table tbody td + td{border-left:1px dashed #2a2f40}
.times-table tbody tr:last-child td{border-bottom:none}
.table th{color:var(--muted);font-weight:600}
.table-wrap{overflow-x:auto}
.table{min-width:540px}
.table.times-table{min-width:unset;width:100%}
.table tr.playing{background:#1a2030;outline:2px solid #9fb0ff}
/* Dimmed separator in Time / Events column */
.time-events-col .sep{opacity:.6;padding:0 4px}

/* Equal column widths for desktop summary table */
.summary-table th, .summary-table td{width:25%}
.summary-table th.start-col, .summary-table td.start-col{width:25%;max-width:none}
.summary-table th.status-col, .summary-table td.status-col{width:25%;max-width:none}
.summary-table th.time-events-col, .summary-table td.time-events-col{width:25%;max-width:none}
.link-log{color:#9fb0ff;text-decoration:none}
.link-log:hover{text-decoration:underline}
.card summary{cursor:pointer;font-weight:700;margin-bottom:10px;list-style:none;font-size:1.5em;line-height:1.25;margin:0 0 4px 0}
.card summary::before{content:"\25B8"; /* ▶ */ display:inline-block; margin-right:8px; color:var(--muted)}
.card[open] summary::before{content:"\25BE"; /* ▼ */}
.card summary::-webkit-details-marker{display:none}
.logs{list-style:none;padding:0;margin:0}
.log{display:grid;grid-template-columns:80px 80px 200px 1fr;gap:5px;padding:5px;border-bottom:1px solid #1d2030}
.log .meta{display:none}
.log .ts{color:var(--muted)}
.log .lvl{font-weight:700}
.log > .ts,.log > .lvl{white-space:nowrap}
.log.info .lvl{color:var(--info)}
.log.warning .lvl{color:var(--warn)}
.log.error .lvl{color:var(--error)}
.log.critical .lvl{color:var(--crit)}
.log .video{color:#9fb0ff;word-break:break-word;overflow-wrap:anywhere}
.log .video.none{color:#667089}
.log .msg{white-space:pre-wrap;word-break:break-word;overflow-wrap:anywhere}
.log:target{background:#1a2030;outline:2px solid #9fb0ff;scroll-margin-top:72px}
.video-wrap{display:block}
.video-embed{width:100%;max-height:60vh;background:#000;border-radius:8px}
#player{scroll-margin-top:72px}
nav a{color:#9fb0ff;text-decoration:none}
/* Header navigation buttons */
header nav{display:flex;gap:8px}
header nav .nav-btn{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:8px;background:#1c2130;color:var(--text);border:1px solid #2a2f40;text-decoration:none}
header nav .nav-btn:hover{border-color:#3b82f6}
/* Prevent nav button text wrapping */
header nav .nav-btn{white-space:nowrap}
@media (max-width: 720px){
  header .inner{padding:0}
  /* Make header buttons narrower to avoid title wrapping */
  header nav{gap:6px}
  header nav .nav-btn{padding:6px 8px;font-size:14px;min-width:auto}
  header .inner h1{line-height:1;margin:0}
}

.chart-wrap{display:block}
.chart{background:#11151d;border-radius:8px;display:block}
.chart .axis-label{fill:#a8adc0;font-size:10px}
/* Extra specificity for SVG text color across browsers */
.chart text.axis-label{fill:#a8adc0}
.chart-legend{margin-top:8px}
.chart-legend ul{list-style:none;padding:0;margin:0;display:flex;flex-wrap:wrap;gap:8px}
.legend-item{display:flex;align-items:center;gap:6px;padding:4px 8px;background:#161922;border-radius:8px}
.legend-chip{display:inline-block;width:12px;height:12px;border-radius:2px}
/* Legend links should look like plain text */
.chart-legend a{color:var(--text);text-decoration:none}
/* Badge row: single line severity chips */
.badge-row{display:flex;gap:8px;align-items:baseline;flex-wrap:nowrap;overflow-x:auto;padding:0}
.badge-row .link-log{display:flex;align-items:center}
.badge-row .tag{line-height:1;vertical-align:baseline}
.badge-row .tag{opacity:0.65;transition:opacity .2s ease}
.badge-row .tag.active{opacity:1}
/* Active highlight for selected gate/status chips inside stats lists */
.stats .tag.active{outline:2px solid #9fb0ff;outline-offset:1px}

/* Gate direction chip next to video name */
.gate-chip{margin-left:4px;background:#1c2130;color:var(--muted);padding:1px 6px;font-size:15px;font-weight:700;line-height:1}
.status-chip .arrow-mobile{display:none}
/* Embedded video player */
.video-wrap{display:block}
.video-embed{width:100%;max-height:60vh;background:#000;border-radius:8px}
/* Clear filter button near selected status badge */
.clear-filter{display:inline-flex;align-items:center;justify-content:center;width:20px;height:20px;margin-left:6px;border-radius:999px;background:#1c2130;color:var(--text);text-decoration:none;border:1px solid #2a2f40;line-height:1;font-size:14px}
.clear-filter:active{transform:scale(0.98)}

/* Floating action button (mobile only) */
.fab{position:fixed;right:16px;bottom:16px;width:44px;height:44px;border-radius:999px;background:#1c2130;color:var(--text);display:flex;align-items:center;justify-content:center;box-shadow:0 6px 16px rgba(0,0,0,0.35);border:1px solid #2a2f40;z-index:9999;text-decoration:none;font-size:22px;line-height:1}
.fab:active{transform:scale(0.98)}
.fab-top{position:fixed;right:16px;bottom:72px;width:44px;height:44px;border-radius:999px;background:#1c2130;color:var(--text);display:flex;align-items:center;justify-content:center;box-shadow:0 6px 16px rgba(0,0,0,0.35);border:1px solid #2a2f40;z-index:9999;text-decoration:none;font-size:22px;line-height:1}
.fab-top:active{transform:scale(0.98)}

/* Utility: hidden */
.hidden{display:none !important}

/* Responsive tweaks for mobile */
@media (max-width: 720px){
  .fab{display:flex}
  .fab-top{display:flex}
  h1{font-size:20px}
  main{padding:12px}
  .card{padding:12px}
  .card h2{margin:0 0 6px 0;line-height:1.2;font-size:18px}
  /* Mobile subheader: slightly larger and spaced from chips above */
  .card h3.subheading{font-size:16px !important;margin:8px 0 8px 0 !important;line-height:1.15;color:var(--muted) !important}
  /* Tighten space below the Away subheader */
  /* Away chips: wrap on multiple lines on mobile as needed */
  .away-list .stats{display:flex;flex-wrap:wrap;gap:8px;overflow-x:visible}
  .away-list .stats li{display:flex;padding:0}
  .card summary{font-size:18px;line-height:1.2;margin:0 0 0 0;font-weight:700}
  .card summary::before{margin-right:6px}
  .grid{grid-template-columns:1fr}
  /* Keep split-card columns side by side on mobile, allow wrap */
  .split-card{flex-direction:row;flex-wrap:nowrap}
  .split-card .left,.split-card .right{flex:0 0 50%;max-width:50%;min-width:0}
  /* Align Gate Crossings & Events to the left on mobile */
  .split-card .right{text-align:left}
  .split-card .right h2,.split-card .right h3{text-align:left}
  .split-card .right .stats{justify-content:flex-start}
  .split-card .right .away-list .stats{justify-content:flex-start}
  /* Hide desktop divider on mobile */
  .split-card::after{content:none}
  /* Toggle labels for mobile */
  .label-desktop{display:none !important}
  .label-mobile{display:inline !important}
  /* Column title style inside times table */
  .times-table th .column-title{display:block;font-size:18px;font-weight:700;line-height:1.2;color:var(--text);margin:0}
  /* Remove compact status badges on mobile; use default list styling */
  .filters{flex-wrap:wrap;gap:8px}
  .filters label{flex:1 1 100%}
  .filters select,.filters button{width:100%}
  .badge-row{gap:6px}
  .badge-row .tag{opacity:0.6}

  /* Logs: stack entries with clearer hierarchy */
  .log{grid-template-columns:1fr;gap:6px;padding:10px}
  .log .meta{display:flex;align-items:baseline;gap:8px;flex-wrap:nowrap}
  .log .meta .ts,.log .meta .lvl,.log .meta .video-inline{white-space:nowrap}
  .log > .ts, .log > .lvl{display:none}
  .log > .video{display:none}
  .log .ts{color:var(--muted)}
  .log .video{margin-top:2px}
  .log .meta .video-inline{margin-top:0}
  .log .msg{margin-top:2px}

    /* Table: full width; use auto layout on mobile to avoid narrow columns
      when rows contain colspan and rich content */
    .table{min-width:unset;width:100%;table-layout:auto}
  .table th,.table td{word-break:break-word;overflow-wrap:anywhere}
  .table th,.table td{padding:6px}
  /* Force chips to break into rows on mobile */
  .status-chip{display:block}
  .chip-row{display:block;margin-top:4px}
  .chip-row .tag{display:block;margin:4px 0 0 0}
  .reid-row{display:block}
  .reid-row .tag{white-space:normal;word-break:normal;overflow-wrap:anywhere}
  /* Allow header wrapping; keep cell inline */
  .table th.time-events-col {white-space:normal}
  .table td.time-events-col {white-space:nowrap}
  /* Preserve fixed layout for the Times table only */
  .table.times-table{table-layout:fixed}
  /* Mobile: remove padding around the slash to eliminate spaces visually */
  .time-events-col .sep{padding:0}
  .times-table td .sec{font-style:italic}
  /* Ensure dashed lines persist on mobile for Times table */
  .table.times-table th,.table.times-table td{border-bottom:1px dashed #2a2f40}
  .times-table thead th + th,.times-table tbody td + td{border-left:1px dashed #2a2f40}
  .times-table tbody tr:last-child td{border-bottom:none}
  .table tr.playing{background:#1a2030;outline:2px solid #9fb0ff}

  /* Chart: responsive height; cap to keep compact */
  .chart{height:auto;max-height:160px}
    .chart .axis-label{font-size:16px}
  .chart text.axis-label{fill:#a8adc0 !important}
  .tag{font-size:12px;padding:2px 6px}
  .gate-chip{padding:1px 6px;font-size:13px;line-height:1}
  /* Per-Video Summary: show colored chip, hide text */
  .table .status-chip{display:inline-flex;align-items:center;justify-content:center;width:24px;height:16px;border-radius:999px;padding:0;vertical-align:middle;font-size:0;}
  .table .status-chip .arrow-mobile{display:inline;font-size:14px;line-height:1;font-weight:700}
  .table .gate-chip{display:none}
  .clear-filter{width:18px;height:18px;font-size:12px;margin-left:4px}
  /* Override: make status chip full-width, center arrow, hide text on mobile */
  .table .status-chip{display:flex;align-items:center;justify-content:center;width:100%;min-height:20px;padding:4px 0;font-size:0;border-radius:999px}
  .chip-row .tag{width:100%;text-align:center}
}